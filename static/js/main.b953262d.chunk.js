(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{124:function(e,t,n){e.exports={error:"Login_error__3CoKY"}},126:function(e,t,n){e.exports={header:"Header_header__2rjiT"}},127:function(e,t,n){e.exports={loader:"loader_loader__TWc-r"}},154:function(e,t,n){e.exports=n(279)},159:function(e,t,n){},160:function(e,t,n){},279:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(59),s=n.n(r),i=(n(159),n(17)),l=n(18),c=n(20),u=n(19),p=(n(160),n(10)),m=n(29),f=n.n(m),d=function(){return o.a.createElement("nav",{className:f.a.nav},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(p.b,{to:"/frends",activeClassName:f.a.activeLink},"Frends")),o.a.createElement("li",null,o.a.createElement(p.b,{to:"/profile",activeClassName:f.a.activeLink},"Profile")),o.a.createElement("li",null,o.a.createElement(p.b,{to:"/messages",activeClassName:f.a.activeLink},"Messages")),o.a.createElement("li",null,o.a.createElement(p.b,{to:"/news",activeClassName:f.a.activeLink},"News")),o.a.createElement("li",null,o.a.createElement(p.b,{to:"music",activeClassName:f.a.activeLink},"Music")),o.a.createElement("li",null,o.a.createElement(p.b,{to:"/setting",activeClassName:f.a.activeLink},"Setting"))))},g=n(11),h=n(9),_=n(40),E=n(5),b=n(61),v=b.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"a05eebd7-af21-4521-b5d7-10d633f7d696"}}),O=function(e,t){return v.get("users?count=".concat(e,"&page=").concat(t))},P=function(e){return v.post("follow/".concat(e),{})},j=function(e){return v.delete("follow/".concat(e))},w=function(e){return v.get("/profile/status/".concat(e))},S=function(e){return v.put("/profile/status/",{status:e})},y=function(e){var t=new FormData;return t.append("image",e),v.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},A=function(e,t,n){return v.post("/auth/login",{email:e,password:t,rememberMe:n})},N=function(){return v.delete("/auth/login")},k=function(){return v.get("/auth/me")},C={frends:[],countSizeUsers:10,totalCount:0,pageNumberActive:5,loader:!1,followingProgress:[]},D=function(e){return{type:"LOADER",loader:e}},M=function(e,t){return{type:"FOLLOWING_PROGRESS",followingProgress:e,id:t}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":var n=Object(E.a)(Object(E.a)({},e),{},{frends:e.frends.map((function(e){return e.id===t.id?Object(E.a)(Object(E.a)({},e),{},{followed:!0}):e}))});return n;case"UNFOLLOW":var a=Object(E.a)(Object(E.a)({},e),{},{frends:e.frends.map((function(e){return e.id===t.id?Object(E.a)(Object(E.a)({},e),{},{followed:!1}):e}))});return a;case"SET_USERS":var o=Object(E.a)(Object(E.a)({},e),{},{frends:t.response,totalCount:t.totalCount});return o;case"ON_PAGE_CHANGED":var r=Object(E.a)(Object(E.a)({},e),{},{pageNumberActive:t.pageNumberActive});return r;case"LOADER":var s=Object(E.a)(Object(E.a)({},e),{},{loader:t.loader});return s;case"FOLLOWING_PROGRESS":var i=Object(E.a)(Object(E.a)({},e),{},{followingProgress:t.followingProgress?[].concat(Object(_.a)(e.followingProgress),[t.id]):e.followingProgress.filter((function(e){return e!=t.id}))});return i;default:return e}},L=n(50),U=n.n(L),T=function(e){for(var t=e.frends.map((function(t){return o.a.createElement("div",{key:t.id},o.a.createElement("div",null,o.a.createElement(p.b,{to:"profile/".concat(t.id)},o.a.createElement("img",{className:U.a.imgProfile,src:t.photos.small?t.photos.small:"https://cdn.iconscout.com/icon/premium/png-512-thumb/profile-1506810-1278719.png",alt:""})),o.a.createElement(p.b,{to:"profile/".concat(t.id),className:U.a.link}," ",t.name),o.a.createElement("p",null,t.uniqueUrlName),o.a.createElement("p",null,t.status)),o.a.createElement("span",null,t.followed?o.a.createElement("button",{disabled:e.followingProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)}},"UnFollow"):o.a.createElement("button",{disabled:e.followingProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)}},"Follow")))})),n=e.totalCount/e.countSizeUsers,a=[],r=function(t){var n=e.pageNumberActive===t?U.a.activePage:null;a.push(o.a.createElement("span",{className:n+" "+U.a.page,onClick:function(){e.onPageChanged(t)}}," ",t," "))},s=1;s<n;s++)r(s);return o.a.createElement("div",null,a,t)},F=n(36),x=n.n(F),R=function(e){return{isAuth:e.auth.isAuth}},z=function(e){var t=function(t){Object(c.a)(a,t);var n=Object(u.a)(a);function a(){return Object(i.a)(this,a),n.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return this.props.isAuth?o.a.createElement(e,this.props):o.a.createElement(g.a,{to:"/login"})}}]),a}(o.a.Component);return Object(h.b)(R)(t)},G=n(8),W=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onPageChanged=function(t){e.props.getUsers(e.props.countSizeUsers,t),e.props.onPageChanged(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.countSizeUsers,this.props.pageNumberActive)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.loader?o.a.createElement("img",{src:x.a}):o.a.createElement(T,{frends:this.props.frends,unfollow:this.props.unfollow,follow:this.props.follow,totalCount:this.props.totalCount,countSizeUsers:this.props.countSizeUsers,onPageChanged:this.onPageChanged,pageNumberActive:this.props.pageNumberActive,toglefollowingProgress:this.props.toglefollowingProgress,followingProgress:this.props.followingProgress}))}}]),n}(o.a.Component),H=Object(G.compose)(Object(h.b)((function(e){return{frends:e.frendsPage.frends,totalCount:e.frendsPage.totalCount,countSizeUsers:e.frendsPage.countSizeUsers,pageNumberActive:e.frendsPage.pageNumberActive,loader:e.frendsPage.loader,followingProgress:e.frendsPage.followingProgress,isAuth:e.auth.isAuth}}),(function(e){return{follow:function(t){e(function(e){return function(t){t(M(!0,e)),P(e).then((function(n){0===n.data.resultCode&&t(function(e){return{type:"FOLLOW",id:e}}(e)),t(M(!1,e))}))}}(t))},unfollow:function(t){e(function(e){return function(t){t(M(!0,e)),j(e).then((function(n){0===n.data.resultCode&&t(function(e){return{type:"UNFOLLOW",id:e}}(e)),t(M(!1,e))}))}}(t))},onPageChanged:function(t){e({type:"ON_PAGE_CHANGED",pageNumberActive:t})},getUsers:function(t,n){e(function(e,t){return function(n){n(D(!0)),O(e,t).then((function(e){n(D(!1)),n(function(e,t){return{type:"SET_USERS",response:e,totalCount:t}}(e.data.items,e.data.totalCount))}))}}(t,n))},toglefollowingProgress:function(t,n){e(M(t,n))}}})),z)(W),J=n(34),B={id:null,email:null,login:null,isAuth:!1},Y=function(e,t,n,a){return{type:"SET_USER_DATA",data:{id:e,login:t,email:n,isAuth:a}}},K=function(){return function(e){return k().then((function(t){0===t.data.resultCode&&e(Y(t.data.data.id,t.data.data.login,t.data.data.email,!0))}))}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":var n=Object(E.a)(Object(E.a)({},e),t.data);return n;default:return e}},q=n(120),Q=n(121),V=n(124),X=n.n(V),$=Object(Q.a)({form:"login"})((function(e){return o.a.createElement("form",{onSubmit:e.handleSubmit},o.a.createElement("div",null,o.a.createElement(q.a,{name:"email",component:"input",type:"text",placeholder:"email"})),o.a.createElement("div",null,o.a.createElement(q.a,{name:"password",component:"input",type:"password",placeholder:"password"})),e.error&&o.a.createElement("div",{className:X.a.error},e.error),o.a.createElement("div",null,o.a.createElement(q.a,{name:"rememberMe",component:"input",type:"checkbox"}),"Remember me"),o.a.createElement("button",null,"Login"))})),ee=Object(h.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(a){A(e,t,n).then((function(e){if(0===e.data.resultCode)a(K());else{var t=e.data.messages.length>0?e.data.messages[0]:"some error";a(Object(J.a)("login",{_error:t}))}}))}}})((function(e){return e.isAuth?o.a.createElement(g.a,{to:"profile"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Login"),o.a.createElement($,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}))})),te=n(88),ne=n.n(te),ae={dialogsData:[{name:"Dima",id:1},{name:"Yana",id:2},{name:"Vlad",id:3}],messageData:[{message:"Privet",id:1},{message:"Poka",id:2},{message:"Poka",id:3}]},oe=function(e){return{type:"ADD_MESSAGE",sendMessage:e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":var n=Object(E.a)(Object(E.a)({},e),{},{messageData:Object(_.a)(e.messageData)}),a={message:t.sendMessage.sendMessage,id:4};return n.messageData.push(a),n;default:return e}},se=n(64),ie=n.n(se),le=function(e){var t="/messages/"+e.id;return o.a.createElement("div",null,o.a.createElement(p.b,{to:t},e.name))},ce=function(e){return o.a.createElement("div",null,e.message)},ue=function(e){return o.a.createElement("form",{onSubmit:e.handleSubmit},o.a.createElement(q.a,{type:"text",component:"input",name:"newMessage"}),o.a.createElement("button",null,"Send message"))};ue=Object(Q.a)({form:"messageForm"})(ue);var pe=function(e){var t=e.dialogsData.map((function(e){return o.a.createElement(le,{name:e.name,id:e.id})})),n=e.messageData.map((function(e){return o.a.createElement(ce,{message:e.message})}));return o.a.createElement("div",{className:ie.a.wrapper},o.a.createElement("div",{className:ie.a.column},t),o.a.createElement("div",{className:ie.a.column},o.a.createElement("div",null,n),o.a.createElement(ue,{onSubmit:function(t){e.sendMessage(oe(t.newMessage))}})))},me=Object(G.compose)(z,Object(h.b)((function(e){return{dialogsData:e.messagesPage.dialogsData,messageData:e.messagesPage.messageData,changeNewMessageInputText:e.messagesPage.changeNewMessageInputText,isAuth:e.auth.isAuth}}),(function(e){return{sendMessage:function(t){e(oe(t))}}})))(pe),fe=n(82),de=n.n(fe),ge=n(65),he=n.n(ge),_e=function(e){return o.a.createElement("div",{className:he.a.post_all_item},o.a.createElement("div",{className:he.a.post_all_item_img},o.a.createElement("img",{src:"https://image.shutterstock.com/image-vector/man-icon-vector-260nw-1040084344.jpg"})),o.a.createElement("div",{className:he.a.post_all_item_content},o.a.createElement("p",null,e.message)))},Ee=function(e){var t=e.postData.map((function(e){return o.a.createElement(_e,{message:e.message})}));return o.a.createElement("div",{className:de.a.post_all},t)},be=Object(h.b)((function(e){return{postData:e.profilePage.postData}}),(function(e){return{}}))(Ee),ve={postData:[{message:"privet kak dela?"},{message:"Super"},{message:"Kruto"}],profileInfo:null,status:""},Oe=function(e){return{type:"SET_STATUS",status:e}},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n=Object(E.a)(Object(E.a)({},e),{},{postData:Object(_.a)(e.postData)}),a={message:t.newMyPostText};return n.postData.push(a),n;case"SET_USER_PROFILE":var o=Object(E.a)({},e);return o.profileInfo=t.profileInfo,o;case"SET_STATUS":var r=Object(E.a)(Object(E.a)({},e),{},{status:t.status});return r;case"SET_PHOTO":var s=Object(E.a)(Object(E.a)({},e),{},{profileInfo:Object(E.a)(Object(E.a)({},e.profileInfo),{},{photos:t.photo})});return s;default:return e}},je=n(89),we=n.n(je),Se=function(e){return o.a.createElement("form",{onSubmit:e.handleSubmit},o.a.createElement(q.a,{type:"text",name:"newMyPostText",component:"input"}),o.a.createElement("button",{className:we.a.send},"send"))};Se=Object(Q.a)({form:"ProfileNewMyPost"})(Se);var ye=function(e){return o.a.createElement("div",{className:we.a.my_post},o.a.createElement("h2",null,"My posts"),o.a.createElement(Se,{onSubmit:function(t){e.addPost(t.newMyPostText)}}))},Ae=Object(h.b)((function(e){return{newMyPost:e.profilePage.newMyPost}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD_POST",newMyPostText:e}}(t))}}}))(ye),Ne=n(41),ke=n.n(Ne),Ce=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deActivateEditMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onChangeStatusInput=function(t){e.setState({status:t.target.value})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return o.a.createElement("div",{className:ke.a.status},this.state.editMode?o.a.createElement("input",{onChange:this.onChangeStatusInput,autoFocus:!0,onBlur:this.deActivateEditMode,type:"text",value:this.state.status}):o.a.createElement("span",{onClick:this.activateEditMode},this.props.status?this.props.status:"No status"))}}]),n}(o.a.Component),De=function(e){return o.a.createElement("div",{className:ke.a.profile},o.a.createElement("div",{className:ke.a.profile_img},o.a.createElement("img",{src:e.profileInfo&&e.profileInfo.photos.large?e.profileInfo.photos.large:"https://upload-icon.s3.us-east-2.amazonaws.com/uploads/icons/png/19339625881548233621-512.png"}),e.isOwner&&o.a.createElement("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}})),o.a.createElement("div",{className:ke.a.profile_info},o.a.createElement("h1",null,e.profileInfo?e.profileInfo.fullName:""),o.a.createElement("p",null,"About me: ",e.profileInfo?e.profileInfo.aboutMe:""),o.a.createElement("p",null,"lookingForAJob: ",e.profileInfo?e.profileInfo.lookingForAJob?o.a.createElement("span",null,"Yes"):o.a.createElement("span",null,"No"):""),o.a.createElement("p",null,"lookingForAJobDescription: ",e.profileInfo?e.profileInfo.lookingForAJobDescription:""),o.a.createElement("p",null,"Status: ",o.a.createElement(Ce,{status:e.status,updateStatus:e.updateStatus}))))},Me=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"refreshProfile",value:function(){var e=this,t=this.props.match.params.profileId;t||(t=this.props.id),this.props.togleLoader(!0),b.get("https://social-network.samuraijs.com/api/1.0/profile/".concat(t)).then((function(t){e.props.togleLoader(!1),e.props.setUserProfile(t.data)})),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.profileId!=e.match.params.profileId&&this.refreshProfile()}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null," ",this.props.loader?o.a.createElement("img",{src:x.a}):o.a.createElement(De,{profileInfo:this.props.profileInfo,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.profileId,savePhoto:this.props.savePhoto}))}}]),n}(o.a.Component),Ie=Object(G.compose)(Object(h.b)((function(e){return{profileInfo:e.profilePage.profileInfo,loader:e.frendsPage.loader,isAuth:e.auth.isAuth,status:e.profilePage.status,id:e.auth.id}}),(function(e){return{setUserProfile:function(t){e(function(e){return{type:"SET_USER_PROFILE",profileInfo:e}}(t))},togleLoader:function(t){e(D(t))},getStatus:function(t){e(function(e){return function(t){w(e).then((function(e){t(Oe(e.data))}))}}(t))},updateStatus:function(t){e(function(e){return function(t){S(e).then((function(n){0===n.data.resultCode&&t(Oe(e))}))}}(t))},savePhoto:function(t){e(function(e){return function(t){y(e).then((function(e){0===e.data.resultCode&&t({type:"SET_PHOTO",photo:e.data.data.photos})}))}}(t))}}})),z,g.f)(Me),Le=function(){return o.a.createElement("div",null,o.a.createElement(Ie,null),o.a.createElement(Ae,null),o.a.createElement(be,null))},Ue=function(){return o.a.createElement("div",{className:ne.a.main_content},o.a.createElement("img",{className:ne.a.main_content_img,src:"https://mdbootstrap.com/img/Photos/Horizontal/Nature/full%20page/img(11).jpg",alt:"profile_bg"}),o.a.createElement(g.b,{path:"/profile/:profileId?",render:function(){return o.a.createElement(Le,null)}}),o.a.createElement(g.b,{path:"/messages",render:function(){return o.a.createElement(me,null)}}),o.a.createElement(g.b,{path:"/frends",render:function(){return o.a.createElement(H,null)}}),o.a.createElement(g.b,{path:"/login",render:function(){return o.a.createElement(ee,null)}}))},Te=n(126),Fe=n.n(Te),xe=function(e){return o.a.createElement("header",{className:Fe.a.header},o.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Facebook_Logo_%282019%29.png/1200px-Facebook_Logo_%282019%29.png",alt:"logo"}),o.a.createElement("div",null,e.auth.isAuth?o.a.createElement("div",null,e.auth.login," ",o.a.createElement("button",{onClick:e.logout},"Log Out")):o.a.createElement(p.b,{to:"/login"},"Login")))},Re=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.authData()}},{key:"render",value:function(){return o.a.createElement(xe,this.props)}}]),n}(o.a.Component),ze=Object(h.b)((function(e){return{auth:e.auth}}),{authData:K,logout:function(){return function(e){N().then((function(t){0===t.data.resultCode&&e(Y(null,null,null,!1))}))}}})(Re),Ge={authotized:!1},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHORIZED_SUCCESS":var n=Object(E.a)(Object(E.a)({},e),{},{authotized:!0});return n;default:return e}},He=n(127),Je=n.n(He),Be=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.authotized()}},{key:"render",value:function(){return this.props.authotizedSuccess?o.a.createElement("div",{className:"app-wrapper"},o.a.createElement(ze,null),o.a.createElement(d,null),o.a.createElement(Ue,null)):o.a.createElement("div",{className:Je.a.loader},o.a.createElement("img",{src:x.a}))}}]),n}(o.a.Component),Ye=Object(G.compose)(g.f,Object(h.b)((function(e){return{authotizedSuccess:e.app.authotized}}),{authotized:function(){return function(e){var t=e(K());Promise.all([t]).then((function(){e({type:"AUTHORIZED_SUCCESS"})}))}}}))(Be);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ke=n(128),Ze=n(122),qe=n(8),Qe=qe.combineReducers,Ve=qe.createStore,Xe=qe.applyMiddleware,$e=Ve(Qe({app:We,profilePage:Pe,messagesPage:re,frendsPage:I,auth:Z,form:Ze.a}),Xe(Ke.a));window.state=$e;var et=$e;s.a.render(o.a.createElement(p.a,null,o.a.createElement(h.a,{store:et},o.a.createElement(Ye,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},29:function(e,t,n){e.exports={nav:"Navbar_nav__3qRm7",activeLink:"Navbar_activeLink__tnT9z"}},36:function(e,t,n){e.exports=n.p+"static/media/loader.3551210e.gif"},41:function(e,t,n){e.exports={profile:"Profile_info_profile__1p52k",profile_img:"Profile_info_profile_img__1F1ZY",profile_info:"Profile_info_profile_info__1LmHU",status:"Profile_info_status__1MGOS"}},50:function(e,t,n){e.exports={imgProfile:"Frends_imgProfile__2t4DB",activePage:"Frends_activePage__1Wckk",page:"Frends_page__1uEhl",link:"Frends_link__2VG__"}},64:function(e,t,n){e.exports={wrapper:"Messages_wrapper__2UtoO",column:"Messages_column__7i_vl"}},65:function(e,t,n){e.exports={post_all_item:"All_post_item_post_all_item__2WEh_",post_all_item_img:"All_post_item_post_all_item_img__1RMJb",post_all_item_content:"All_post_item_post_all_item_content__2BXk3"}},82:function(e,t,n){e.exports={post_all:"All_post_post_all__1QUHa"}},88:function(e,t,n){e.exports={main_content:"Main_content_main_content__2STeW",main_content_img:"Main_content_main_content_img__1oR5X"}},89:function(e,t,n){e.exports={my_post:"My_post_my_post__3EQ6P",send:"My_post_send__1haD2"}}},[[154,1,2]]]);
//# sourceMappingURL=main.b953262d.chunk.js.map